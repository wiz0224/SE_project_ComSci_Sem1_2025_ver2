(self.modernJsonp=self.modernJsonp||[]).push([["53882"],{894870:function(e,t,n){n.d(t,{q:()=>_});var a=n(667294),r=n(581722),s=n(312048),i=n(322830),o=n(935059),l=n(575820),u=n(966039),c=n(179664),d=n(513504);let _=()=>{let e=(0,s.TH)(),t=(0,o.Z)(),n=(0,r.I0)(),{getNuxSignals:_,selectedUseCases:p,selectedPins:m,shouldUseNewReducerState:g}=(0,c.u)(),f=g?_():(0,u.rQ)(p,m);return(0,a.useCallback)(()=>{let a=t.isAuth&&t.firstHomeFeedRequestAfterNux,r=(0,i.Z)({viewerIsPartner:t.isAuth&&t.isPartner,inNux:(a&&n((0,d.H5)(!1)),a),staticFeed:!!(e&&(e.pathname.includes("pwt_performance_testing")||void 0!==(0,l.mB)(e.search).pwt_performance_testing)),inNewsHub:e?.pathname.includes("news_hub")??!1});return{name:"UserHomefeedResource",options:f.length>0?{...r,nux_signals_map:f}:r}},[n,t,e,f])}},933442:function(e,t,n){n.d(t,{_:()=>o,p:()=>l});var a=n(667294),r=n(213491),s=n(785893);let{Provider:i,get:o}=(0,r.Z)("VisualShopContext");function l({children:e}){let[t,n]=(0,a.useState)({}),[r,o]=(0,a.useState)({}),l=(0,a.useRef)(0),u=(0,a.useRef)("");return(0,s.jsx)(i,{value:{cachedOneBarModules:t,setCachedOneBarModules:n,cachedDescriptorModules:r,setCachedDescriptorModules:o,imageContainerScrollTop:l,imageContainerScrollTopForPinId:u},children:e})}},400962:function(e,t,n){n.d(t,{aX:()=>_,nK:()=>p,ou:()=>u});var a=n(667294),r=n(312048),s=n(213491),i=n(520803),o=n(785893);let{Provider:l,get:u}=(0,s.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),c=e=>e&&e.pathname?e.pathname+(e.search||""):"";function d(e,t){let n={action:t.type,location:t.location,match:t.match};if(t.location===e.current?.location)return e;switch(t.type){case"POP":if(e.forward.length>0&&c(e.forward[0].location)===c(n.location))return{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};return{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:n,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:n};default:return e}}function _(){let{current:e,previous:t}=u();return(0,a.useMemo)(()=>e?t.concat(e):t,[e,t])}function p({children:e}){let t=(0,r.ur)(),n=(0,r.TH)(),s=(0,i.Z)(),[u,c]=(0,a.useReducer)(d,{forward:[],current:{action:t,location:n,match:s},previous:[]}),_=(0,a.useRef)(n),p=(0,a.useRef)(s);return(_.current!==n||p.current!==s)&&(c({type:t,location:n,match:s}),_.current=n,p.current=s),(0,o.jsx)(l,{value:u,children:e})}},59111:function(e,t,n){n.d(t,{Z:()=>o});var a=n(686659),r=n(667294);n(441143);var s=n(785893);class i{static factory(e){return e instanceof i?e:new i(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function o(e){(0,r.useEffect)(()=>{(0,a.Z)("InlineStyle","/app/packages/InlineStyle.tsx")},[]);let{css:t,unsafeCSS:n,...o}=e,l=String(t||"")||n||"";return l?(0,s.jsx)("style",{...o,dangerouslySetInnerHTML:{__html:String(i.factory(l))}}):null}},214879:function(e,t,n){n.d(t,{Z:()=>r,v:()=>a});let a=()=>"undefined"!=typeof navigator&&"getInstalledRelatedApps"in navigator;async function r(){if(!a())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},47755:function(e,t,n){n.d(t,{Z:()=>r});var a=n(681698);function r({url:e,urlParams:t,method:n,data:r,ignoreBookmark:s,callOptions:i,headers:o}){let l=e;return t&&Object.entries(t).forEach(([e,t])=>{let n=`{${e}}`;l.includes(n)&&(l=l.replaceAll(n,encodeURIComponent(String(t))))}),(0,a.Z)({url:l,method:n,data:r,ignoreBookmark:s,callOptions:i,headers:o})}},995514:function(e,t,n){n.d(t,{Z:()=>i});var a=n(375181),r=n(24246),s=n(216975);function i(){let e=(0,r.Z)();return function(t,n){let r=new Date(t).getTime(),i=Date.now()-r,o=Math.floor(i/a.FS),l=Math.floor(i/a.UK),u=Math.floor(i/a.F4),c=Math.floor(i/a.VL),d=Math.floor(i/a.N9),_=Math.floor(i/a.N1),p=e.ngettext('{{ minutes }} minute ago', '{{ minutes }} minutes ago', o, ' - ', ' -- '),m=e.ngettext('{{ hours }} hour ago', '{{ hours }} hours ago', l, ' - ', ' -- '),g=e.ngettext('{{ days }} day ago', '{{ days }} days ago', u, ' - ', ' -- '),f=e.ngettext('{{ weeks }} week ago', '{{ weeks }} weeks ago', c, ' - ', ' -- '),h=e.ngettext('{{ months }} month ago', '{{ months }} months ago', d, 'useGetHumanizedTimeSince.monthsString', 'months since last update'),y=e.ngettext('{{ years }} year ago', '{{ years }} years ago', _, ' - ', ' -- '),E=e.ngettext('{{ minutes }}m', '{{ minutes }}m', o, 'minutes ago abbreviated', 'minutes ago abbreviated'),v=e.ngettext('{{ hours }}h', '{{ hours }}h', l, 'hours ago abbreviated', 'hours ago abbreviated'),b=e.ngettext('{{ days }}d', '{{ days }}d', u, 'days ago abbreviated', 'days ago abbreviated'),T=e.ngettext('{{ weeks }}w', '{{ weeks }}w', c, 'weeks ago abbreviated', 'weeks ago abbreviated'),w=e.ngettext('{{ months }}mo', '{{ months }}mo', d, 'months ago abbreviated', 'months ago abbreviated'),C=e.ngettext('{{ years }}y', '{{ years }}y', _, 'years ago abbreviated', 'years ago abbreviated');return _>0?(0,s.nk)(n?C:y,{years:_}).join(""):d>0?(0,s.nk)(n?w:h,{months:d}).join(""):c>0?(0,s.nk)(n?T:f,{weeks:c}).join(""):u>0?(0,s.nk)(n?b:g,{days:u}).join(""):l>0?(0,s.nk)(n?v:m,{hours:l}).join(""):o>0?(0,s.nk)(n?E:p,{minutes:o}).join(""):e._('Just now', ' - ', ' -- ')}}},331506:function(e,t,n){n.d(t,{bN:()=>p,BY:()=>d,fs:()=>l,EU:()=>o,kt:()=>_,Ly:()=>c,RC:()=>i,eK:()=>u});let a=/\s\s+/g;var r=n(680589);let s=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_title"])),i=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,o=(e,t)=>e?e.trim().length>t?(0,r.ZP)(e.trim(),t).trim():e.trim():"",l=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:a,storyPinDataId:r,storyPinDataMetadataPinTitle:s})=>{let i=s||e,l=o(t,200);return l||n||a||(r&&i?i:null)},u=e=>{let{richSummaryDisplayName:t}=e,n=e.pinJoinVisualAnnotation||[],s=e.pinJoinAnnotationsWithLinks||{},i=e.richMetadataDescription||"",o=e.closeupUnifiedDescription||"",l=n.map(e=>(s||{})[e]||{name:e,url:""}),u="",c=(t||"").toLocaleLowerCase().trim(),d=i.toLocaleLowerCase().trim(),_=o.toLocaleLowerCase().trim();return o&&o.length>3&&_!==c?u=o:i&&i.length>3&&d!==c&&(u=i),u&&(u=(0,r.ZP)(u,496).replace(a," ").trim()),{description:u,annotationsWithLinks:l}},c=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:a,storyPinDataId:r,storyPinDataMetadataPinTitle:i,pinJoinVisualAnnotation:u,seoNoindexReason:c,shouldUseSimplifiedTitle:d=!1})=>s.has(c??"")?u?.[0]??" ":d?o(t,200)||u?.[0]||"":l({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:a,storyPinDataId:r,storyPinDataMetadataPinTitle:i})||u?.[0]||e,d=e=>`/pin/${e}/`,_=(e,t)=>{let n=`Pinterest video from ${t}: `.concat(e);return""===t?e:n},p=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:d(e)},702763:function(e,t,n){n.d(t,{X:()=>a});let a="favorited"},849232:function(e,t,n){n.d(t,{kf:()=>f,l5:()=>m,of:()=>_,xC:()=>g,yz:()=>p});var a=n(667294),r=n(213491),s=n(504644),i=n(893957),o=n(986523),l=n(767415),u=n(785893);let{Provider:c,getMaybe:d}=(0,r.Z)("PwaContext"),_=({children:e,initialContext:t})=>{let[n,r]=(0,a.useState)(null),o=t||{pwaType:"unknown",twaType:null},d=o.pwaType;(0,i.Z)(()=>{let e=(0,s.FB)(window)||"unknown";r(e),d!==e&&(0,l.nP)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:d,clientPwaType:e,conflict:"unknown"!==d&&"unknown"!==e}})});let _="unknown"===d&&n?n:d,{twaType:p}=o,m=(0,a.useMemo)(()=>({pwaType:_,twaType:p}),[_,p]);return(0,u.jsx)(c,{value:m,children:e})},p=()=>{let e=d();return e?.pwaType??"unknown"},m=()=>{let e=d();return e?.twaType??null},g=()=>"android-twa"===p(),f=()=>{let e=p(),t=(0,o.Z)();return"unknown"===e&&t?null:"windows"===e}},890678:function(e,t,n){n.d(t,{Z:()=>s});var a=n(629972),r=n(957547);function s(e){let{enabledRouteRefresh:t,headers:n,name:s,noCache:i,options:o,schema:l}=e??{name:a.fY,options:null},u=!e,{fetchResource:c,ref:d,fetchMore:_,isFetching:p,isLoaded:m,isRefreshing:g,refresh:f}=(0,r.Z)({enabledRouteRefresh:t,headers:n,name:s,noCache:i,options:o,schema:l},u,!1);return u||c(),{ref:d,fetchMore:_,isFetching:p,isLoaded:m,isRefreshing:g,refresh:f}}},135269:function(e,t,n){n.d(t,{Z:()=>s});var a=n(739405),r=n(177433);function s(){return function({deviceType:e,site:t}){switch(t){case"analytics":return 4;case"business":return 6;case"planninghub-internal":return 12;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"commerce-app-latest":case"pintergration":return 10;case"creators":case"create":return 11;case"newsroom":return 13;case"about":return 14;case"pinnacle-internal":return 17;default:return+("phone"===e||"tablet"===e)}}({deviceType:(0,a.ZP)(),site:(0,r.uo)()})}},415316:function(e,t,n){n.d(t,{o:()=>a,u:()=>r});let{Provider:a,getMaybe:r}=(0,n(213491).Z)("inviteContext")},640200:function(e,t,n){n.d(t,{Z:()=>a});function a(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}},380938:function(e,t,n){n.d(t,{Z:()=>o});var a=n(686659),r=n(667294),s=n(20256),i=n(785893);function o({ariaHidden:e=!1,color:t,size:n}){return(0,r.useEffect)(()=>{(0,a.Z)("Dot","/app/packages/ui/Dot.tsx")},[]),(0,i.jsx)("span",{"aria-hidden":e,style:{padding:"0 4px"},children:(0,i.jsx)(s.xv,{color:t,inline:!0,size:n??"200",children:"Â·"})})}},577356:function(e,t,n){n.d(t,{Zo:()=>a,dI:()=>r});let{Provider:a,get:r}=(0,n(213491).Z)("toastManagerContext")},787194:function(e,t,n){n.d(t,{M:()=>i,Q:()=>s});var a=n(667294);let r=(0,a.createContext)(null),s=()=>(0,a.useContext)(r),i=r},45762:function(e,t,n){n.d(t,{Z:()=>p});var a=n(4533),r=n(15881),s=n(505633),i=n(331506),o=n(34550),l=n(418282),u=n(935833);let c=new class{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}},d=new class{constructor(){this.rules={},this.init()}init(){for(let e of[{category:"dweb_max_free_pin_modal",validate:this.validateImageView.bind(this),action:"SHOW_LOGIN_MODAL"},{category:"dweb_save",validate:this.saveRule.bind(this),action:"SHOW_SAVE_MODAL"},{category:"dweb_scroll_banner_dismiss_rule",validate:this.scrollBanerDismissRule.bind(this),action:"BOTTOM_RIGHT_BANNER_DISMISS"},{category:"dweb_scroll_banner_limit_rule",validate:this.scrollBannerLimitRule.bind(this),action:"BOTTOM_RIGHT_BANNER_LIMIT"},{category:"dweb_scroll_banner_show",validate:this.scrollBannerShowRule.bind(this),action:"BOTTOM_RIGHT_BANNER_SHOW"}])this.addRule(e)}initExperiment(e){this.experiment=e}addRule(e){this.rules[e.category]=this.rules[e.category]??[],this.rules[e.category].push(e)}evaluate(e,t){if(!this.rules[e])return null;for(let n of this.rules[e])if(n.validate(t))return n.action;return null}validateImageView(e){let{clickCount:t}=e,{hasSeenLoginModal:n}=e,{hasDismissedLoginModal:a}=e,r=this.experiment?.group==="enabled_relaxation";return r?t+1>=4&&!n&&!a:t+1>=4&&!n}saveRule(e){return"desktop"===e.deviceType}scrollBanerDismissRule(e){return e.scrollTop<64}scrollBannerLimitRule(e){return e.scrollTop<4e3}scrollBannerShowRule(e){let t=this.experiment?.group==="enabled_relaxation";return t?e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3&&!e.hasDismissedLoginModal:e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3}};var _=n(925201);let p=new class{constructor(){this.init()}init(){c.on("pinView",this.handlePinView.bind(this)),c.on("pinSave",this.handleSavePin.bind(this)),c.on("showDesktopSignupModal",this.showDesktopSignupModal.bind(this)),c.on("hideDesktopSignupModal",this.hideDesktopSignupModal.bind(this)),c.on("onScrollHybridBanner",this.onScrollHybridBanner.bind(this))}initExperiment(e){this.experiment=e("dweb_upsell_manager_mvp_2"),this.experiment&&d.initExperiment(this.experiment)}emitEvent(e,t){c.emit(e,t)}handlePinView(e){let{history:t,linkTarget:n}=e,c=(0,o.M0)().getItem(a.cu)??0;(0,o.M0)().setItem(a.cu,c+1);let p=(0,l.Nl)().getItem(r.J7);if("SHOW_LOGIN_MODAL"===d.evaluate("dweb_max_free_pin_modal",{clickCount:c,hasSeenLoginModal:p})){let{onUpsellTriggerCallback:a}=e;a(),(0,u.My)("dweb.navigational.upsell.show"),(0,l.Nl)().setItem(r.J7,"true");let o={pinId:e.pinId,seoUrl:e.seoUrl},c=(0,_.Z)((0,i.bN)(o),{mt:"login"});if("fullPageLoad"===n)(0,s.Z)(c,!1);else if("duploClientNav"===n)t.push(c);else{let e=window.open(c,"_blank");e?.focus()}}}handleSavePin(e){if("SHOW_SAVE_MODAL"===d.evaluate("dweb_save",{deviceType:e.deviceType})){let{pinId:t,attributionLabel:n,modalHeadingType:a,showSignupModal:r}=e;r({attributionLabel:"extended_save_out_of_quota"===a?"click_save_button_with_max_unauth_saves":n||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",mobileOptions:{headingType:a},desktopOptions:{modalType:"signup",modalOptions:{source:"saveButtonExp",container:"save"}},pinId:t})}}showDesktopSignupModal(e){let{displayProps:t,viewType:n,viewParameter:a,trackInteraction:r,trackConversionUpsellForContext:s,logDesktopSignupModalEvent:i,dispatchSignupModalAction:o}=e;o({type:"show",displayProps:t});let{attributionLabel:l,signupFlow:u,reason:c}=t;r({action:"trigger",item:u.type.includes("signup")?"signup-modal":"login-modal"}),s({viewType:n,viewParameter:a,eventType:14688,element:{UPSELL_LOGIN_OR_SIGNUP:13319,ACTION_REQUIRES_LOGIN_OR_SIGNUP:13320,CLICK_LOGIN_OR_SIGNUP:13321}[c]||13322,component:"login"===u.type?14212:14214,upsellReason:l}),i("dispatch_show",{attributionLabel:l,modalType:u.type,reason:c})}hideDesktopSignupModal(e){let{shouldDoSideEffects:t,loginForMore:n,dispatchSignupModalAction:a,logDesktopSignupModalEvent:r}=e,s=e.isEligibilityLoginForMore;t&&n&&s&&n.setVisible(!1),a({type:"dismiss"}),r("dispatch_dismiss",{shouldDoSideEffects:t})}onScrollHybridBanner(e){let{evt:t,isSafari:n,trackConversionUpsell:a,UnauthHybridBannerClassComponent:s,isInOpenModalExperience:i}=e,o=0,u=t&&t.target instanceof Document?t.target:null;if(u&&u.documentElement&&u.documentElement.scrollTop>0?o=u.documentElement.scrollTop:u&&u.body&&u.body.scrollTop>0&&(o=u.body.scrollTop),"BOTTOM_RIGHT_BANNER_DISMISS"===d.evaluate("dweb_scroll_banner_dismiss_rule",{scrollTop:o}))s.state.shouldShowBanner&&!s.state.bannerDismissed&&(a({element:13893,eventType:10243}),s.state.bannerDismissed=!0),s.setShouldShowBanner(!1);else if("BOTTOM_RIGHT_BANNER_LIMIT"===d.evaluate("dweb_scroll_banner_limit_rule",{scrollTop:o})){let e=s.state.shouldShowBanner;s.setState(e=>({shouldShowBanner:"BOTTOM_RIGHT_BANNER_SHOW"===d.evaluate("dweb_scroll_banner_show",{isInOpenModalExperience:i,isSafari:n,state:e}),scrollSessionCount:Math.ceil(o/800)}),()=>{e||!s.state.shouldShowBanner||s.state.bannerViewed||(a({eventType:14688,element:13319,component:14479,upsellReason:"scroll_down"}),s.state.bannerViewed=!0)})}else!(0,l.Nl)().getItem(r.J7)&&!i&&n&&t&&t.preventDefault()}}},17658:function(e,t,n){n.d(t,{Z:()=>r});var a=n(667294);function r(e,t){let n=(0,a.useRef)([]),[r,s]=(0,a.useState)(),[i,o]=(0,a.useReducer)(r??(()=>t),t),l=(0,a.useCallback)(t=>{r?o(t):(n.current.length||e().then(e=>{s(()=>e.default)}),n.current=[...n.current,t])},[e,r]);return(0,a.useEffect)(()=>{r&&(n.current.forEach(o),n.current=[])},[r]),[i,l]}},293646:function(e,t,n){n.d(t,{Z:()=>o});var a=n(667294);let r=new Map,s=null,i=e=>{e.forEach(e=>{let t=r.get(e.target);t&&t(e)})};function o({onVisibilityChanged:e,trackFullVisible:t,rootMargin:n}){let o=(0,a.useRef)(null),l=!1,u=()=>{let t;o.current instanceof HTMLElement&&(t=o.current,r.has(t))&&l&&(e(!1),l=!1)},c=(0,a.useCallback)(n=>{o.current instanceof HTMLElement&&((e,t="-64px 0px 0px 0px",n)=>{let a={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};s=s||new window.IntersectionObserver(i,a),r.set(e,n),s.observe(e)})(o.current,n,n=>{if(!r.has(o.current))return;let a=t?n.intersectionRatio>=1:n.intersectionRatio>=.5,s=t?0===n.intersectionRatio:!a;!l&&a?(l=n.intersectionRatio>0||n.isIntersecting)&&e(!0):l&&s&&u()})},[o.current]);return(0,a.useEffect)(()=>(c(n),()=>{if(o.current instanceof HTMLElement){var e;u(),e=o.current,s.unobserve(e),r.delete(e)}}),[c]),o}},264267:function(e,t,n){n.d(t,{pb:()=>E,nf:()=>v,lV:()=>b});var a=n(667294),r=n(581722),s=n(441143),i=n.n(s),o=n(27399),l=n(213491),u=n(681698),c=n(57887),d=n(360033),_=n(730056);let p={feature_map:Object.freeze({})},m=(e,t)=>{let n={...(0,_.Z)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return(0,d.ZP)(e,n)?e:n},g=(e,t)=>{if(e=e||p,"FETCH_COMPLETE"===t.type){let{payload:{resource:n,options:a={}}}=t,{data:r}=t.payload.response.resource_response;if("AggregatedCommentReplyFeedResource"===n||"ApiResource"===n&&a.url===`/v3/aggregated_comments/${a.data?.aggregated_comment}/replies/`||"ApiResource"===n&&a.url===`/v3/aggregated_pin_data/${a.data?.aggregated_pin_data}/comments/`||"DidItCommentsResource"===n){let t=(r||[]).reduce((t,n)=>(t[n.id]=m(e[n.id],n),t),{});return{...e,...t}}if("UnifiedCommentsResource"===n&&r&&r.length>0){let t=r.filter(e=>"aggregatedcomment"===e.type).reduce((t,n)=>(t[n.id]=m(e[n.id],n),t),{});return{...e,...t}}if("UnifiedCommentsPreviewResource"===n&&r&&r.length>0){let t=r.map(e=>e.aggregated_comment).reduce((t,n)=>(n&&(t[n.id]=m(e[n.id],n)),t),{}),n=r.map(e=>e.creator_reply).reduce((t,n)=>(n&&n.id&&(t[n.id]=m(e[n.id],n)),t),{});return{...e,...t,...n}}if("ApiResource"===n&&"/v3/aggregated_comments/features/"===a.url&&r&&Object.keys(r).length>0)return{...e,feature_map:r}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:n}}=t;return n.id?{...e,[n.id]:n}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:n}}=t,a={...e};return delete a[n],a}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:n}}=t;return Object.fromEntries(Object.entries(e??{}).filter(e=>e[1].user?.id!==n))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:n}}=t;return{...e,[n.id]:m(e?.[n.id],n)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:n}}=t,a=e?.[n.id],r=a?.reaction_counts[1]||0,s={1:n.reaction_by_me?r+1:r-1},i={...a,reaction_by_me:n.reaction_by_me,reaction_counts:s};return{...e,[n.id]:i}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:n}}=t,a=e?.[n.id],r=a?.helpful_count||0,s=n.marked_helpful_by_me?r+1:r-1,i={...a,marked_helpful_by_me:n.marked_helpful_by_me,helpful_count:s};return{...e,[n.id]:i}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:n}}=t,a={...e?.[n.aggregated_comment_id],highlighted_by_pin_owner:n.is_highlighted};return{...e,[n.aggregated_comment_id]:a}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:n}}}=t;return{...e,feature_map:{...e?.feature_map,...n}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:n,id:a}}=t,r=e?.[a];if(!r)return e;let s={...r,comment_count:r.comment_count+n};return{...e,[a]:s}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:n,tagged_users:a}}=t,r={...e?.[n],tagged_users:a};return{...e,[n]:r}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:n,translatedText:a}}=t,r={...e?.[n],translatedText:a};return{...e,[n]:r}}return e};var f=n(785893);let{Provider:h,get:y}=(0,l.Z)("AggregatedComments");function E({children:e}){let t=(0,r.v9)(({resources:e})=>e?.UnifiedCommentsResource),n=p;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),a=t?.reduce((e,t)=>(e[t.id]=m(n[t.id],t),e),{});n={...n,...a}});let[s,i]=(0,a.useReducer)(g,n),o=e=>{i({type:"FETCH_COMPLETE",payload:e})};(0,c.Z8)("AggregatedCommentReplyFeedResource",o),(0,c.my)("AggregatedCommentReplyFeedResource",o),(0,c.Z8)("ApiResource",o),(0,c.my)("ApiResource",o),(0,c.Z8)("DidItCommentsResource",o),(0,c.my)("DidItCommentsResource",o),(0,c.Z8)("UnifiedCommentsPreviewResource",o),(0,c.my)("UnifiedCommentsPreviewResource",o),(0,c.Z8)("UnifiedCommentsResource",o),(0,c.my)("UnifiedCommentsResource",o);let l=(0,a.useMemo)(()=>({aggregatedComments:s,dispatch:i}),[s,i]);return(0,f.jsx)(h,{value:l,children:e})}function v(){let{dispatch:e}=y();return(0,a.useMemo)(()=>({aggregatedCommentCreated(t,n){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:n}})},aggregatedCommentDeleted:(t,n)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:n}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({isAggregatedComment:e=!0,commentId:t,reason:n,detailedReasons:a})=>{let r=e?`/v3/aggregated_comments/${t}/flag/`:`/v3/did_it/${t}/flag/`;return(0,u.Z)({url:r,method:"PUT",data:{commentId:t,reason:n,detailedReasons:a}})},deleteCommentMention:async t=>{let{resource_response:n}=await (0,u.Z)({url:`/v3/aggregated_comments/${t}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),a=n.data??{};e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:a.id,tagged_users:a.tagged_users}})},translateAggregatedComment:async t=>{try{let{resource_response:n}=await (0,u.Z)({url:`/v3/aggregated_comments/${t}/translate/`,method:"GET"}),a=n.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:a}})}catch(n){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:n,orbacSubjectId:a})=>{(0,u.Z)({url:`/v3/helpful/1/${t}/`,method:n?"DELETE":"POST",data:a?{orbac_subject_id:a}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!n}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:n,isHighlighted:a})=>{i()(t,"Could not find comment"),i()(n,"Could not find Pin"),await (0,u.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:n,highlight:!a}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:n,is_highlighted:!a}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:n,orbacSubjectId:a})=>{(0,u.Z)({url:`/v3/aggregated_comments/${t}/react/`,method:n?"DELETE":"POST",data:{reaction_type:1,...a?{orbac_subject_id:a}:{}}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:+!n}}})},updateAggregatedComment:async({commentId:t,force:n,orbacSubjectId:a,tags:r,text:s})=>{let{resource_response:i}=await o.Z.create("AggregatedCommentResource",{commentId:t,force:n,tags:r,text:s,...a?{orbacSubjectId:a}:{}}).callUpdate({showError:!1}),{tagged_users:l}=i.data??{};e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:l.map(e=>({...e})),tags:JSON.parse(r),text:s}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:n,passcode:a,userConfirmPasscode:r})=>{let{resource_response:s}=await (0,u.Z)({url:"/v3/aggregated_comments/features/",method:"PUT",data:{user:t,feature_map:JSON.stringify(n),passcode:a,user_confirm_skip_passcode:r??!1}});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:s.data??Object.freeze({})}}})},updateCommentCount:(t,n)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:n,id:t}})}}),[e])}function b(){let{aggregatedComments:e}=y();return e}},74972:function(e,t,n){n.d(t,{g:()=>_,G:()=>d});var a=n(667294),r=n(213491),s=n(970414),i=n(515511);let o={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{},videoCarouselModuleAutoplaying:{}},viewportSize:"lg"},l=(e=o,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type&&e.showTypeaheadOverlay!==t.payload)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){let{payload:n}=t,{pinId:a,isPromoted:r,currentTime:s,surface:o}=n,{videosAutoplaying:l}=e,{currentlyPlayingOrganicVideoId:u,promotedVideosAutoplaying:c,organicVideosAutoplaying:d,videoCarouselModuleAutoplaying:_}=l,p=(0,i.Z)(c),m=(0,i.Z)(d),g=(0,i.Z)(_);return!r&&u&&"VideoCarouselModule"!==o?e:(r?p[a]={pinId:a,currentTime:s,paused:!1}:"VideoCarouselModule"===o?g[a]={pinId:a,currentTime:s,paused:!1}:m[a]={pinId:a,currentTime:s,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:r?u:a,promotedVideosAutoplaying:p,organicVideosAutoplaying:m,videoCarouselModuleAutoplaying:g}})}if("SET_IS_AUTOPLAY"===t.type&&e.isAutoplay!==t.payload)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){let{payload:n}=t,{pinId:a,isPromoted:r,currentTime:s,surface:o}=n,{videosAutoplaying:l}=e,{promotedVideosAutoplaying:u,organicVideosAutoplaying:c,videoCarouselModuleAutoplaying:d}=l,_=(0,i.Z)(u),p=(0,i.Z)(c),m=(0,i.Z)(d);return r?_[a]={..._[a],paused:!0,currentTime:s}:"VideoCarouselModule"===o?m[a]={...m[a],paused:!0,currentTime:s}:p[a]={...p[a],paused:!0,currentTime:s},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:_,organicVideosAutoplaying:p,videoCarouselModuleAutoplaying:m}}}if("SET_APP_FOCUS_STATE"===t.type&&e.appInFocus!==t.payload)return{...e,appInFocus:t.payload};if("SET_VIEWPORT_SIZE"===t.type&&e.viewportSize!==t.payload)return{...e,viewportSize:t.payload};if("SET_FOOTER_VISIBILITY_STATE"===t.type&&e.footerPlusButtonVisible!==t.payload)return{...e,footerPlusButtonVisible:t.payload};return e};var u=n(785893);let{Provider:c,get:d}=(0,r.Z)("AppUI");function _({children:e}){let[t,n]=(0,a.useReducer)(l,o),r=(0,a.useCallback)(e=>n({type:"PAUSE_CURRENT_VIDEO",payload:e}),[]),i=(0,a.useCallback)(e=>n({type:"SET_APP_FOCUS_STATE",payload:e}),[]),d=(0,a.useCallback)(e=>n({type:"SET_CURRENT_VIDEO",payload:e}),[]),_=(0,a.useCallback)(e=>n({type:"SET_FOOTER_VISIBILITY_STATE",payload:e}),[]),p=(0,a.useCallback)(e=>n({type:"SET_IS_AUTOPLAY",payload:e}),[]),m=(0,a.useCallback)(e=>n({type:"SET_VIEWPORT_SIZE",payload:e}),[]),g=(0,a.useCallback)(e=>n({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e}),[]),f=(0,a.useMemo)(()=>({pauseAutoplay:r,setCurrentVideo:d,setFooterPlusButtonVisible:_,setIsAutoplay:p,setViewportSize:m,toggleTypeaheadOverlay:g,setAppFocusState:i,appUI:t}),[r,d,_,p,m,g,i,t]);return(0,a.useEffect)(()=>{s.Z.onSessionResume(()=>{i(!0)}).onSessionPause(()=>{i(!1)})},[i]),(0,u.jsx)(c,{value:f,children:e})}},609170:function(e,t,n){n.d(t,{C:()=>r});var a=n(501010);function r(){let{checkExperiment:e}=(0,a.Z)();switch(e("entrypoints_collage_wasm").group){case"prefetch_all":default:return{preloadExtent:"Both"};case"prefetch_only_js":return{preloadExtent:"OnlyJS"};case"control":return{preloadExtent:"None"}}}},746319:function(e,t,n){n.d(t,{Z:()=>s});var a=n(935059),r=n(501010);let s=()=>{let{checkExperiment:e}=(0,r.Z)(),t=(0,a.Z)(),n=t.isAuth&&!t.isPartner;return (t=!1)=>{if(!n)return{anyEnabled:!1,followupFeatureEnabled:!1};let a=e("web_collage_creation",{dangerouslySkipActivation:t}),{anyEnabled:r}=a;return{anyEnabled:r,followupFeatureEnabled:a.group.startsWith("employee")||"enabled_followup_feature"===a.group}}}},49254:function(e,t,n){n.d(t,{c:()=>r,t:()=>s});var a=n(380108);function r({children:e}){let{height:t}=(0,a.Z)();return e(t)}function s(){let{height:e}=(0,a.Z)();return e}},380108:function(e,t,n){n.d(t,{C:()=>a,Z:()=>s});let{Provider:a,get:r}=(0,n(213491).Z)("Header"),s=r},872003:function(e,t,n){n.d(t,{G:()=>_,Kl:()=>p,vo:()=>d});var a=n(667294),r=n(213491),s=n(57887),i=n(17658),o=n(785893);let l=()=>n.e("65333").then(n.bind(n,557189)),{Provider:u,get:c}=(0,r.Z)("NativeEngagements");function d({children:e}){let[t,n]=(0,i.Z)(l,[]);(0,s.Z8)("NativeInteractionsResource",e=>{n({type:"FETCH_COMPLETE",payload:e})}),(0,s.my)("NativeInteractionsResource",e=>{n({type:"FETCH_MORE_COMPLETE",payload:e})});let r=(0,a.useMemo)(()=>({dispatch:n,nativeEngagements:t}),[n,t]);return(0,o.jsx)(u,{value:r,children:e})}function _(){let{dispatch:e}=c();return(0,a.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function p(){let{nativeEngagements:e}=c();return e}},411657:function(e,t,n){n.d(t,{D:()=>a,u:()=>r});let{Provider:a,getMaybe:r}=(0,n(213491).Z)("unauthPageWrapperContext")},167021:function(e,t,n){n.d(t,{K:()=>i,T:()=>o});var a=n(667294),r=n(785893);let s=(0,a.createContext)({getPinFeedbackStatus:()=>void 0,setPinFeedbackStatus:()=>{}}),i=()=>(0,a.useContext)(s);function o({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),i=(0,a.useMemo)(()=>({getPinFeedbackStatus:({pinId:e})=>t[e],setPinFeedbackStatus:({pinId:e,pinFeedbackStatus:a})=>n({...t,[e]:a})}),[t]);return(0,r.jsx)(s,{value:i,children:e})}},874288:function(e,t,n){n.d(t,{Z:()=>r});var a=n(581722);let r=()=>(0,a.v9)(({session:{canUseNativeApp:e}})=>e)},832333:function(e,t,n){n.d(t,{Z:()=>d});var a=n(686659),r=n(667294),s=n(20256),i=n(785893);function o(e){return`${Math.min(100*e,100)}%`}function l({customCover:e,imgPos:t,imgUrl:n}){let[a,s]=(0,r.useState)({height:0,loaded:!1,width:0}),{height:i,loaded:l,width:u}=a;if((0,r.useEffect)(()=>{let e=new Image;e.onload=()=>{s({height:e.naturalHeight,loaded:!0,width:e.naturalWidth})},e.src=n},[n]),!e||!t||!i||!u)return{loaded:l,position:"center center"};let c=u-t.width,d=i-t.height,_=c>0?o(t.x/c):"center",p=d>0?o(t.y/d):"center";return{loaded:l,position:`${_} ${p}`}}function u(e){let{loaded:t,position:n}=l(e),{imgUrl:a}=e,r={backgroundImage:`url(${a})`,backgroundPosition:n,backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:"100%",backgroundColor:"#EFEFEF",position:"relative"};return(0,i.jsx)(s.xu,{"data-test-id":"cover-image-box",height:"100%",width:"100%",children:t&&(0,i.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:r},"data-test-id":"cover-image",children:(0,i.jsx)("div",{className:"imageWash",style:{position:"absolute"}})})})}function c(e){let{loaded:t,position:n}=l(e),{alt:a,color:r,imgUrl:o}=e;return(0,i.jsx)(s.zd,{height:"100%",width:"100%",children:t&&(0,i.jsx)("img",{alt:a||"",src:o,style:{backgroundColor:r||"#EFEFEF",fetchPriority:"cover",height:"100%",loading:"auto",objectFit:"cover",objectPosition:n,width:"100%"}})})}function d(e){(0,r.useEffect)(()=>{(0,a.Z)("CoverImage","/app/www/board/CoverImage.tsx")},[]);let{renderAsImage:t}=e;return t?(0,i.jsx)(c,{...e}):(0,i.jsx)(u,{...e})}},307618:function(e,t,n){n.d(t,{$:()=>o,w:()=>l});var a=n(667294),r=n(213491),s=n(785893);let{Provider:i,getMaybe:o}=(0,r.Z)("CloseupPreviewContext");function l({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),r=(0,a.useMemo)(()=>({setData:(e,t)=>n(n=>({...n,[e]:t})),getData:e=>t[e]}),[t]);return(0,s.jsx)(i,{value:r,children:e})}},40763:function(e,t,n){n.d(t,{Z:()=>i});var a=n(501010),r=n(774838),s=n(739405);let i=({skipExpActivation:e=!1})=>{let{checkExperiment:t}=(0,a.Z)(),n=(0,s.HG)(),{isBot:i,isAuthenticated:o}=(0,r.B)();return!o&&!!n&&n&&!i&&t("unauth_dweb_closeup_redesign",{dangerouslySkipActivation:e}).anyEnabled}},301527:function(e,t,n){n.d(t,{o:()=>o,p:()=>l});var a=n(667294),r=n(213491),s=n(785893);let{Provider:i,get:o}=(0,r.Z)("Session");function l({children:e}){let[t,n]=(0,a.useState)(void 0),r=(0,a.useCallback)(()=>n(void 0),[]),o=(0,a.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:n,removeUnauthCommentPinId:r}),[t,r]);return(0,s.jsx)(i,{value:o,children:e})}},201198:function(e,t,n){n.d(t,{Z:()=>u});var a=n(686659),r=n(667294),s=n(20256),i=n(785893);let o={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function l(){return(0,i.jsx)(s.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:8,width:"100%",children:(0,i.jsx)(s.xu,{dangerouslySetInlineStyle:o,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function u({disabled:e,form:t,fullWidth:n,name:o,onClick:u,size:c,submitting:d,text:_}){return(0,r.useEffect)(()=>{(0,a.Z)("SubmitButton","/app/www/common/SubmitButton/SubmitButton.tsx")},[]),(0,i.jsxs)(s.xu,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[d&&(0,i.jsx)(l,{}),(0,i.jsx)(s.zx,{color:"red",disabled:e||d,form:t,fullWidth:n,name:o,onClick:u,size:c,text:_,type:"submit"})]})}},248481:function(e,t,n){n.d(t,{G3:()=>d,Rp:()=>c,kp:()=>u});var a=n(4533),r=n(15881),s=n(375181),i=n(34550),o=n(418282);let l=14*s.F4,u=(e,t)=>{let n=function(){let e=Date.now(),t=(0,i.M0)(),n=Number(t.getItem(a.Li)??null);return{currentTime:e,firstUpsellTime:Number(t.getItem(a.O7)??null),lastUpsellTime:n,showedAppUpsellCurrentSession:!!(0,o.Nl)().getItem(r.JO)}}();return e?function(e,t,n){let{currentTime:r,firstUpsellTime:s,lastUpsellTime:o,showedAppUpsellCurrentSession:u}=e;return(n=n||l,!s||r<s+t)?!u:r-o>n&&((0,i.M0)().removeItem(a.O7),!0)}(n,s.F4):function(e,t){let{currentTime:n,lastUpsellTime:a}=e;return t=t||l,!a||n-a>t}(n,t)},c=({isBot:e,platform:t,userAgent:n})=>{try{return!e&&"android"===t&&7>parseFloat((e=>{let t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0})(n))}catch(e){return!1}},d=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},966039:function(e,t,n){n.d(t,{Es:()=>u,HW:()=>l,er:()=>d,rQ:()=>c});var a=n(4533),r=n(34550),s=n(767415);let i=e=>e>=Date.now()-72e5,o=(e,t)=>{let n=[];if(e)for(let a of e)(!t||a.is_shared)&&i(a.ts)&&n.push(a);return n},l=()=>{let e=(0,r.M0)().getItem(a.uc)??[],t=o(e,!1),n=o(e,!0),s=t.map(e=>e.first_pin_image_signature),l=n.map(e=>e.first_pin_image_signature),u=(e=>{let t={};if(e)for(let n of e)n.is_shared&&i(n.ts)&&n.pin_id&&(t[n.pin_id]={inviteCode:n.pin_invite_code});return t})(e);return{extraPlpImages:s,plpImageRenderData:t,extraBlpImages:o((0,r.M0)().getItem(a.hI)??[],!0).map(e=>e.first_pin_image_signature),extraSharedImages:l,sharedPinData:u}},u=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n].id!==t[n].id)return!1;return!0},c=(e,t)=>e.map(e=>({1:e,2:(t[e]||[]).map(e=>({1:e,2:"pin"}))})),d=(e,t,n,a)=>{let r={};return e.forEach(e=>{let i=e.id,o=e.pins.length??0;r[i]=o,(0,s.QX)("webapp.log.nux.pin.picker.step.pin.number.of.pins",o,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:i,gender:n,age:a,use_case_display_name:e.display_name}}),(0,s.S0)("gauge.webapp.log.nux.pin.picker.step.pin.number.of.pins",o,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:i,gender:n,age:a,use_case_display_name:e.display_name}})}),r}},818906:function(e,t,n){n.d(t,{$:()=>d,Z:()=>p});var a=n(667294),r=n(581722),s=n(4533),i=n(15881),o=n(127078),l=n(784548),u=n(34550),c=n(418282);let d=2,_=e=>e.length?{pins:e}:null,p=()=>{let e,t=(0,u.M0)(),n=(0,r.I0)(),p=(0,o.hO)(),m=Array.isArray(p)&&p.length>0?p.map(e=>({id:e.id,imageUrl:e.imageUrl,nodeId:null})):(e=c.ZP.getItem(i.w3),e?.pins??[]),g=m.map(e=>e.id).join(","),f=(0,a.useMemo)(()=>m,[g]),h=e=>{t.accessAllowed?t.setItem(s.s1,_(e)):c.ZP.setItem(i.w3,_(e)),n((0,l.pv)(e.map(e=>({id:e.id,imageUrl:e.imageUrl,ts:Date.now()}))))},y=()=>f.length<d;return{pins:f,save:e=>{y()&&h(f.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>{h(f.filter(({id:t})=>t!==e))},isSaved:e=>f.some(({id:t})=>t===e),clear:()=>{h([])},canSaveMore:y}}},39722:function(e,t,n){n.d(t,{B:()=>u,m:()=>l});var a=n(667294),r=n(312048),s=n(213491),i=n(785893);let{Provider:o,getMaybe:l}=(0,s.Z)("NotifDetailRepinContext");function u({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),[s,l]=(0,a.useState)(!1),[u,c]=(0,a.useState)(!1),d=(0,r.TH)(),_=(0,a.useMemo)(()=>{let e=/^\/pin\/\d+\/repin\/?$/,a=/^\/news_hub\/\d+\/?$/;return{isSaved:e=>!!t[e],save:e=>{u&&n(t=>({...t,[e]:!0}))},reset:()=>{let t=window?.location.pathname||"";a.test(t)||e.test(t)||(n(Object.freeze({})),l(!1),c(!1))},isInNewsHubQuickSaveExpAndNewsHubPage:()=>{let e=d.pathname||"";return a.test(e)&&s},inNewsHubQuickSaveExp:s,setInNotifDetailPage:c,setInNewsHubQuickSaveExp:l}},[t,s,u,d]);return(0,i.jsx)(o,{value:_,children:e})}},38359:function(e,t,n){n.d(t,{BT:()=>U,Du:()=>x,Fh:()=>P,HY:()=>D,HZ:()=>k,Jw:()=>y,Kp:()=>j,L7:()=>a,LT:()=>d,Lj:()=>L,Nw:()=>A,Q_:()=>C,Qc:()=>r,R5:()=>R,RA:()=>S,Tt:()=>M,UF:()=>u,UV:()=>i,VB:()=>v,W1:()=>s,Ws:()=>_,X5:()=>O,Yt:()=>N,ZW:()=>l,cK:()=>b,cy:()=>h,fA:()=>Z,gm:()=>E,h7:()=>w,k:()=>g,mE:()=>H,o4:()=>m,oL:()=>G,qf:()=>p,tr:()=>c,uD:()=>T,uO:()=>f,vF:()=>o,wJ:()=>I});let a=1,r=2,s="female",i="male",o="unspecified",l="en-US",u="US",c=3,d="Welcome",_="Gender",p="CountryLocale",m="InterestPicker",g="UseCase",f="PinPicker",h="LoadingStep",y="AppInstall",E="NUX_PIN_PICKER_STEP_STATUS",v="NUX_USE_CASE_STEP_STATUS",b={NUX_GENDER_STEP_NAME:_,NUX_COUNTRY_LOCALE_STEP_NAME:p,NUX_INTEREST_PICKER_STEP_NAME:m,NUX_USE_CASE_STEP_NAME:g,NUX_PIN_PICKER_STEP_NAME:f,NUX_LOADING_STEP_NAME:h,NUX_APP_INSTALL_STEP_NAME:y},T=2,w=3,C=6,A=112,S=160,R=60,O=1e3,M=2500,P=1900,I=2e3,k=3,N=1,U=3,D=3,x=5e3,G=250,Z=1e10,L=507641,H=300,j=200},179664:function(e,t,n){n.d(t,{W:()=>d,u:()=>c});var a=n(667294),r=n(213491),s=n(501010),i=n(38359);let o=(e,t)=>{let n=((e,t)=>{switch(t.type){case"SELECT_PIN":{let{pinData:n,pinId:a,useCaseId:r}=t.payload;return function({pinData:e,pinId:t,state:n,useCaseId:a}){let r=new Map(n.selectedUseCases),s=r.get(a)||{selectedPins:[],heroPin:null,backfillPins:[]},i={...e,pinId:t,selectedAt:Date.now()};return r.set(a,{...s,selectedPins:[...s.selectedPins,i]}),{...n,selectedUseCases:r}}({pinData:n,pinId:a,state:e,useCaseId:r})}case"DESELECT_PIN":{let{pinId:n,useCaseId:a}=t.payload;return function({pinId:e,state:t,useCaseId:n}){let a=new Map(t.selectedUseCases),r=a.get(n);return r&&a.set(n,{...r,selectedPins:r.selectedPins.filter(t=>t.pinId!==e)}),{...t,selectedUseCases:a}}({pinId:n,state:e,useCaseId:a})}case"SELECT_USE_CASE":{let{heroPin:n,useCaseId:a}=t.payload;return function({heroPin:e,state:t,useCaseId:n}){let a=new Map(t.selectedUseCases);return a.set(n,{selectedPins:[],heroPin:e,backfillPins:[]}),{...t,selectedUseCases:a}}({heroPin:n,state:e,useCaseId:a})}case"DESELECT_USE_CASE":{let{useCaseId:n}=t.payload;return function({state:e,useCaseId:t}){let n=new Map(e.selectedUseCases);return n.delete(t),{...e,selectedUseCases:n}}({state:e,useCaseId:n})}case"ADD_BACKFILL_PINS":{let{backfillPins:n,useCaseId:a}=t.payload;return function({backfillPins:e,state:t,useCaseId:n}){let a=new Map(t.selectedUseCases),r=a.get(n);return r&&a.set(n,{...r,backfillPins:[...e]}),{...t,selectedUseCases:a}}({backfillPins:n,state:e,useCaseId:a})}default:return e}})(e,t);return{...n,history:[...n.history||[],t]}};var l=n(785893);let{Provider:u,get:c}=(0,r.Z)("Nux");function d({children:e}){let[t,n]=(0,a.useState)([]),[r,c]=(0,a.useState)({}),[d,_]=(0,a.useState)(!1),{checkExperiment:p}=(0,s.Z)(),m=p("ap_dweb_nux_revamp_auto_pin_select",{dangerouslySkipActivation:!0}).anyEnabled,g={selectedUseCases:new Map,history:[]},[f,h]=(0,a.useReducer)(o,g),y=(0,a.useCallback)(()=>Array.from(f.selectedUseCases.values()).reduce((e,t)=>e+t.selectedPins.length,0),[f.selectedUseCases]),E=(0,a.useCallback)(e=>Array.from(f.selectedUseCases.entries()).reduce((t,[n,a])=>e&&n===e?t:t.concat(a.selectedPins),[]),[f.selectedUseCases]),v=(0,a.useCallback)(e=>E(e).map(e=>({url:e.imageMediumUrl,height:e.height,width:e.width})),[E]),b=(0,a.useCallback)(()=>{let e=[];for(let[t,n]of f.selectedUseCases){let a=n.selectedPins.map(e=>({1:e.pinId,2:"pin"}));e.push({1:t,2:a})}return e},[f.selectedUseCases]),T=(0,a.useCallback)(()=>f.selectedUseCases&&y()>=i.HZ,[y,f.selectedUseCases]),w=(0,a.useCallback)(()=>m?f.selectedUseCases.size>=i.BT:f.selectedUseCases.size>=i.Yt,[f.selectedUseCases,m]),C=(0,a.useMemo)(()=>({checkHasMetMinimumPinSelectionRequirement:T,checkHasMetMinimumUseCaseSelectionRequirement:w,getNuxSignals:b,getNumSelectedPins:y,getSelectedPinImageData:v,nuxSelectionsDispatch:h,nuxSelectionsState:f,selectedPins:r,selectedUseCases:t,setSelectedPins:c,setSelectedUseCases:n,setShouldUseNewReducerState:_,shouldUseNewReducerState:d}),[T,w,b,y,v,h,f,r,t,c,n,_,d]);return(0,l.jsx)(u,{value:C,children:e})}},513504:function(e,t,n){n.d(t,{H5:()=>l,Nq:()=>o,Q_:()=>u,bJ:()=>c});var a=n(27399),r=n(236269),s=n(554092),i=n(38359);function o(e){let{updateUserData:t}=e,n={},o=null;if(t.gender&&[i.W1,i.UV].includes(t.gender)?n.gender=t.gender:t.custom_gender&&(n.custom_gender=t.custom_gender,n.customGender=t.custom_gender,n.gender=i.vF),t.age?n.age=t.age:t.birthdate&&(n.birthdate=t.birthdate),t.locale&&(n.locale=t.locale),t.country&&(n.country=t.country),t.business_vertical&&(n.businessVertical=t.business_vertical),t.business_vertical_other&&(n.businessVerticalOther=t.business_vertical_other),t.number_employees&&(n.numberEmployees=t.number_employees),t.first_name&&(n.firstName=t.first_name),t.last_name&&(n.lastName=t.last_name),t.full_name&&(n.fullName=t.full_name),t.parent_email&&(n.parentEmail=t.parent_email),t.website_url&&(n.websiteUrl=t.website_url),t.listed_website_url&&(n.listedWebsiteUrl=t.listed_website_url),void 0!==t.allow_analytic_cookies&&(n.allow_analytic_cookies=t.allow_analytic_cookies),void 0!==t.allow_analytic_cookies&&(n.allow_marketing_cookies=t.allow_marketing_cookies),void 0!==t.allow_analytic_cookies&&(n.allow_personalization_cookies=t.allow_personalization_cookies),t.advertising_intent||t.business_name||t.account_type||t.business_goals||t.selected_ecommerce_platforms||t.enable_profile_message||t.enable_profile_address){let{account_type:e,advertising_intent:n,business_name:a,business_goals:r,enable_profile_message:s,enable_profile_address:i,selected_ecommerce_platforms:l}=t;o={...n?{advertising_intent:n}:{},...e?{account_type:e}:{},...a?{business_name:a}:{},...r?{business_goals:r}:{},...s?{enable_profile_message:s}:{},...i?{enable_profile_address:i}:{},...l?{selected_ecommerce_platforms:l}:{}}}o&&(n.partner=o,o.business_name&&(n.firstName=o.business_name));let l=a.Z.create("UserSettingsResource",{...t,surface_tag:s.i.NUX}).callUpdate();return async function(e){try{let t=await l;return e({type:"UPDATE_USER_SET",payload:n}),t}catch(e){return Promise.reject(Error((0,r.Z)(e,"message")))}}}function l(e){return{type:"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX",payload:e}}function u(e,t){return()=>{a.Z.create("UserStateResource",{state:e,value:t}).callCreate()}}function c(e,t=""){return()=>a.Z.create("UpdateFollowedInterestsResource",{referrer:t,updated_interest_follows:e}).callUpdate()}},500912:function(e,t,n){n.d(t,{Q:()=>l,n:()=>o});var a=n(667294),r=n(213491),s=n(785893);let{Provider:i,getMaybe:o}=(0,r.Z)("RepinContext");function l({children:e}){let[t,n]=(0,a.useState)(Object.freeze({})),r=(0,a.useMemo)(()=>({getSavedPinId:e=>t[e],isSaved:e=>!!t[e],save:(e,t)=>n(n=>({...n,[e]:t})),unsave:e=>n(t=>({...t,[e]:null}))}),[t]);return(0,s.jsx)(i,{value:r,children:e})}},636953:function(e,t,n){n.d(t,{Z:()=>s});var a=n(667294),r=n(767415);function s(e){let t=(0,a.useRef)({kind:"NotOver"}),n=(0,a.useCallback)(()=>{"NotOver"===t.current.kind&&(t.current={kind:"OverButNotClicked",mousedOverAt:Date.now()})},[]),s=(0,a.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,r.LY)("entrypointRouter.timeOnLinkUntilMouseOut",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,r.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"MouseOut"}})),t.current={kind:"NotOver"}},[e]);return{onClick:(0,a.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,r.LY)("entrypointRouter.timeOnLinkUntilClick",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,r.nP)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"Click"}}),t.current={kind:"OverAndHasClicked"})},[e]),onMouseEnter:n,onMouseLeave:s}}},721750:function(e,t,n){(0,n(701943).kr)()},758594:function(e,t,n){function a({children:e,metricName:t}){let n=void 0;return n&&n.serverRenderTimings&&!n.serverRenderTimings[t]&&(n.serverRenderTimings[t]=Date.now()),e}n.d(t,{Z:()=>a}),n(701943),n(721750)},305375:function(e,t,n){n.d(t,{Z:()=>i});var a=n(616550),r=n(312048),s=n(501010);function i(){return((0,s.Z)().checkExperiment("web_react_router_v6").anyEnabled?r.UO:a.UO)()}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/53882-4cb843058775b31c.mjs.map